<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.1/css/all.min.css">

<style>
    .nav-link {
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
        padding: 0.75rem 0.5rem;
        text-align: center;
        font-size: 0.75rem;
    }

    .nav-link i {
        font-size: 1.25rem;
        margin-bottom: 0.25rem;
    }

    .nav-text {
        display: none;
    }

    /* Medium screens and up: show text alongside icons */
    @media (min-width: 768px) {
        .nav-link {
            flex-direction: row;
            justify-content: flex-start;
            padding: 0.75rem 1rem;
            text-align: left;
            font-size: 1rem;
        }

        .nav-link i {
            font-size: 1rem;
            margin-bottom: 0;
            margin-right: 0.75rem;
        }

        .nav-text {
            display: inline;
        }
    }

    /* Active state styling */
    .nav-link.active {
        background-color: rgba(0, 123, 255, 0.1);
        border-left: 3px solid #007bff;
        font-weight: 500;
    }

    /* Logo responsive sizing */
    .navbar-brand img {
        width: 60px;
    }

    @media (min-width: 768px) {
        .navbar-brand img {
            width: min(80%, 120px);
        }
    }
</style>

<nav class="col-2 navbar navbar-expand-lg navbar-light bg-light border-end vh-100 position-fixed">
    <div class="container-fluid d-flex flex-column h-100 p-0">
        <!-- Logo -->
        <div class="navbar-brand text-center m-0 py-3">
            <img src="/imgs/logo.png" alt="Logo" class="img-fluid">
        </div>

        <!-- Navigation Links -->
        <div class="navbar-nav flex-column w-100 mt-2" id="sidebarNav">
            <ul class="navbar-nav flex-column w-100">
                <li>
                    <a href="/slots-availability" class="nav-link {{navLinkClass activePage 'slots-availability'}}">
                        <i class="fa-solid fa-desktop"></i>
                        <span class="nav-text">Slots Availability</span>
                    </a>
                </li>

                {{#if user}}

                {{#hasRole user "student"}}
                <li>
                    <a href="/my-reservations" class="nav-link {{navLinkClass activePage 'my-reservations'}}">
                        <i class="fa-solid fa-calendar-check"></i>
                        <span class="nav-text">My Reservations</span>
                    </a>
                </li>

                <li>
                    <a href="/search-user" class="nav-link {{navLinkClass activePage 'search-user'}}">
                        <i class="fa-brands fa-sistrix"></i>
                        <span class="nav-text">Search User</span>
                    </a>
                </li>

                <li>
                    <a href="/my-profile" class="nav-link {{navLinkClass activePage 'my-profile'}}">
                        <i class="fa-regular fa-user"></i>
                        <span class="nav-text">My Profile</span>
                    </a>
                </li>
                {{/hasRole}}

                {{#hasRole user "technician"}}
                <li>
                    <a href="/manage-labs" class="nav-link {{navLinkClass activePage 'manage-labs'}}">
                        <i class="fa-solid fa-network-wired"></i>
                        <span class="nav-text">Lab Management</span>
                    </a>
                </li>

                <li>
                    <a href="/search-user/search" class="nav-link {{navLinkClass activePage 'search-user'}}">
                        <i class="fa-brands fa-sistrix"></i>
                        <span class="nav-text">Search User</span>
                    </a>
                </li>

                <li>
                    <a href="/my-profile" class="nav-link {{navLinkClass activePage 'my-profile'}}">
                        <i class="fa-regular fa-user"></i>
                        <span class="nav-text">My Profile</span>
                    </a>
                </li>
                {{/hasRole}}

                

                {{/if}}
            </ul>
        </div>

        <!-- Spacer -->
        <div class="flex-grow-1"></div>

        <!-- Logout at bottom -->
        <div class="navbar-nav flex-column w-100 mb-3">
            <ul class="navbar-nav flex-column w-100">
                {{#if user}}
                
                {{#hasRole user "technician,student"}}
                <li>
                    <form action="/logout" method="POST" class="d-inline w-100">
                        <button type="submit" class="nav-link border-0 bg-transparent w-100 text-start">
                            <i class="fa-solid fa-arrow-right-from-bracket"></i>
                            <span class="nav-text">Logout</span>
                        </button>
                    </form>
                </li>
                {{/hasRole}}
                
                {{else}}
                <li>
                    <a href="/login" class="nav-link">
                        <i class="fa-solid fa-right-to-bracket"></i>
                        <span class="nav-text">Login / Register</span>
                    </a>
                </li>
                
                {{/if}}
            </ul>
        </div>
    </div>
</nav>

{{! Required Bootstrap JS for collapse functionality }}
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>